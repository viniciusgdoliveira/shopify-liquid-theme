{% comment %}
  V-inspired Product Cards
  Clean, minimal design with white backgrounds and sustainability focus
{% endcomment %}

<div class="v-product-card" id="shopify-section-{{ section.id }}">
  <div class="v-product-card__container">
    {% if section.settings.heading != blank %}
      <div class="v-product-card__header">
        <h2 class="v-product-card__title">{{ section.settings.heading }}</h2>
        {% if section.settings.subheading != blank %}
          <p class="v-product-card__subtitle">{{ section.settings.subheading }}</p>
        {% endif %}
      </div>
    {% endif %}
    
    <div class="v-product-card__grid">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'product' %}
            <div class="v-product-card__item" {{ block.shopify_attributes }}>
              {% if block.settings.product %}
                {% assign product = block.settings.product %}
                
                <div class="v-product-card__image">
                  <a href="{{ product.url }}" class="v-product-card__link">
                    {% if product.featured_image %}
                      {% render 'image', 
                        image: product.featured_image, 
                        class: 'v-product-card__img',
                        width: 400,
                        height: 400
                      %}
                    {% else %}
                      <div class="v-product-card__placeholder">
                        <span class="v-product-card__placeholder-text">No Image</span>
                      </div>
                    {% endif %}
                    
                    {% if product.compare_at_price > product.price %}
                      <div class="v-product-card__badge v-product-card__badge--sale">
                        Sale
                      </div>
                    {% endif %}
                    
                    {% if block.settings.sustainability_badge != blank %}
                      <div class="v-product-card__badge v-product-card__badge--sustainability">
                        ðŸŒ± {{ block.settings.sustainability_badge }}
                      </div>
                    {% endif %}
                  </a>
                </div>
                
                <div class="v-product-card__content">
                  <h3 class="v-product-card__name">
                    <a href="{{ product.url }}">{{ product.title }}</a>
                  </h3>
                  
                  {% if product.description != blank and block.settings.show_description %}
                    <p class="v-product-card__description">
                      {{ product.description | truncate: 100 }}
                    </p>
                  {% endif %}
                  
                  <div class="v-product-card__price">
                    {% if product.compare_at_price > product.price %}
                      <span class="v-product-card__price-sale">
                        {{ product.price | money }}
                      </span>
                      <span class="v-product-card__price-original">
                        {{ product.compare_at_price | money }}
                      </span>
                    {% else %}
                      <span class="v-product-card__price-regular">
                        {{ product.price | money }}
                      </span>
                    {% endif %}
                  </div>
                  
                  {% if block.settings.show_rating and product.metafields.reviews.rating.value %}
                    <div class="v-product-card__rating">
                      <div class="v-product-card__stars">
                        {% assign rating = product.metafields.reviews.rating.value %}
                        {% for i in (1..5) %}
                          {% if i <= rating %}
                            <span class="v-product-card__star v-product-card__star--filled">â˜…</span>
                          {% else %}
                            <span class="v-product-card__star">â˜…</span>
                          {% endif %}
                        {% endfor %}
                      </div>
                      <span class="v-product-card__rating-text">
                        ({{ product.metafields.reviews.rating_count.value }})
                      </span>
                    </div>
                  {% endif %}
                  
                  <div class="v-product-card__actions">
                    <form action="/cart/add" method="post" enctype="multipart/form-data">
                      <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                      <button type="submit" class="v-product-card__button btn btn-primary" 
                              {% unless product.available %}disabled{% endunless %}>
                        {% if product.available %}
                          Add to Cart
                        {% else %}
                          Sold Out
                        {% endif %}
                      </button>
                    </form>
                  </div>
                </div>
              {% endif %}
            </div>
        {% endcase %}
      {% endfor %}
    </div>
    
    {% if section.settings.button_text != blank and section.settings.button_url != blank %}
      <div class="v-product-card__footer">
        <a href="{{ section.settings.button_url }}" class="v-product-card__cta btn btn-outline">
          {{ section.settings.button_text }}
        </a>
      </div>
    {% endif %}
  </div>
</div>

{% stylesheet %}
.v-product-card {
  padding: 4rem 0;
  background: var(--color-background, #ffffff);
}

.v-product-card__container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

.v-product-card__header {
  text-align: center;
  margin-bottom: 3rem;
}

.v-product-card__title {
  font-size: clamp(2rem, 4vw, 3rem);
  font-weight: 800;
  color: var(--color-text-primary, #000000);
  margin-bottom: 1rem;
  letter-spacing: -0.02em;
}

.v-product-card__subtitle {
  font-size: 1.125rem;
  color: var(--color-text-secondary, #6C6C6C);
  max-width: 600px;
  margin: 0 auto;
  line-height: 1.5;
}

.v-product-card__grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
  margin-bottom: 3rem;
}

.v-product-card__item {
  background: var(--color-background, #ffffff);
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s ease;
  border: 1px solid var(--color-border-light, #F0F0F0);
}

.v-product-card__item:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
  border-color: var(--color-border, #E0E0E0);
}

.v-product-card__image {
  position: relative;
  aspect-ratio: 1;
  overflow: hidden;
}

.v-product-card__link {
  display: block;
  width: 100%;
  height: 100%;
}

.v-product-card__img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.v-product-card__item:hover .v-product-card__img {
  transform: scale(1.05);
}

.v-product-card__placeholder {
  width: 100%;
  height: 100%;
  background: var(--color-background-secondary, #F5F5F5);
  display: flex;
  align-items: center;
  justify-content: center;
}

.v-product-card__placeholder-text {
  color: var(--color-text-tertiary, #999999);
  font-size: 0.875rem;
}

.v-product-card__badge {
  position: absolute;
  top: 1rem;
  right: 1rem;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.v-product-card__badge--sale {
  background: var(--color-error, #DC3545);
  color: var(--color-text-inverse, #ffffff);
}

.v-product-card__badge--sustainability {
  background: rgba(40, 167, 69, 0.1);
  color: var(--color-accent, #28A745);
  border: 1px solid rgba(40, 167, 69, 0.2);
}

.v-product-card__content {
  padding: 1.5rem;
}

.v-product-card__name {
  margin: 0 0 0.75rem 0;
  font-size: 1.125rem;
  font-weight: 600;
  line-height: 1.3;
}

.v-product-card__name a {
  color: var(--color-text-primary, #000000);
  text-decoration: none;
  transition: color 0.2s ease;
}

.v-product-card__name a:hover {
  color: var(--color-accent, #28A745);
}

.v-product-card__description {
  font-size: 0.875rem;
  color: var(--color-text-secondary, #6C6C6C);
  line-height: 1.4;
  margin: 0 0 1rem 0;
}

.v-product-card__price {
  margin-bottom: 1rem;
}

.v-product-card__price-regular,
.v-product-card__price-sale {
  font-size: 1.125rem;
  font-weight: 700;
  color: var(--color-text-primary, #000000);
}

.v-product-card__price-original {
  font-size: 0.875rem;
  color: var(--color-text-tertiary, #999999);
  text-decoration: line-through;
  margin-left: 0.5rem;
}

.v-product-card__rating {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.v-product-card__stars {
  display: flex;
  gap: 0.125rem;
}

.v-product-card__star {
  color: var(--color-border, #E0E0E0);
  font-size: 0.875rem;
}

.v-product-card__star--filled {
  color: #FFC107;
}

.v-product-card__rating-text {
  font-size: 0.75rem;
  color: var(--color-text-secondary, #6C6C6C);
}

.v-product-card__button {
  width: 100%;
  padding: 0.875rem 1.5rem;
  font-size: 0.875rem;
  font-weight: 600;
  border-radius: 8px;
  transition: all 0.2s ease;
}

.v-product-card__button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.v-product-card__footer {
  text-align: center;
}

.v-product-card__cta {
  padding: 1rem 2rem;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 50px;
  min-width: 200px;
}

/* Responsive Design */
@media screen and (max-width: 768px) {
  .v-product-card {
    padding: 2rem 0;
  }
  
  .v-product-card__container {
    padding: 0 1rem;
  }
  
  .v-product-card__header {
    margin-bottom: 2rem;
  }
  
  .v-product-card__grid {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
  }
  
  .v-product-card__content {
    padding: 1.25rem;
  }
}

@media screen and (max-width: 480px) {
  .v-product-card__grid {
    grid-template-columns: 1fr;
  }
  
  .v-product-card__badge {
    top: 0.75rem;
    right: 0.75rem;
    padding: 0.375rem 0.75rem;
    font-size: 0.625rem;
  }
}
{% endstylesheet %}

{% schema %}
{
  "name": "V Product Cards",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "V Styling"
    },
    {
      "type": "select",
      "id": "v_style",
      "label": "V Style",
      "options": [
        {
          "value": "minimal",
          "label": "Minimal - Clean and simple"
        },
        {
          "value": "sustainability",
          "label": "Sustainability Focus - Green accents"
        },
        {
          "value": "bold",
          "label": "Bold Typography - Strong headlines"
        },
        {
          "value": "natural",
          "label": "Natural - Earthy tones"
        }
      ],
      "default": "minimal",
      "info": "Choose the V design style for this component"
    },
    {
      "type": "color",
      "id": "custom_background_color",
      "label": "Custom Background Color",
      "info": "Override the background color for this component"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Featured Products"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Section Subheading",
      "default": "Discover our most popular sustainable products"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "View All Button Text",
      "default": "View All Products"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "View All Button URL"
    },
    {
      "type": "header",
      "content": "Sustainability Features"
    },
    {
      "type": "checkbox",
      "id": "show_sustainability_badge",
      "label": "Show Sustainability Badge",
      "default": true,
      "info": "Display sustainability messaging on products"
    },
    {
      "type": "text",
      "id": "default_sustainability_text",
      "label": "Default Sustainability Text",
      "default": "Sustainable",
      "info": "Default text for sustainability badges"
    },
    {
      "type": "select",
      "id": "sustainability_style",
      "label": "Sustainability Badge Style",
      "options": [
        {
          "value": "subtle",
          "label": "Subtle - Light background"
        },
        {
          "value": "prominent",
          "label": "Prominent - Bold green"
        },
        {
          "value": "minimal",
          "label": "Minimal - Text only"
        }
      ],
      "default": "subtle"
    },
    {
      "type": "header",
      "content": "Animations & Interactions"
    },
    {
      "type": "checkbox",
      "id": "enable_hover_effects",
      "label": "Enable Hover Effects",
      "default": true,
      "info": "Add hover animations to product cards"
    },
    {
      "type": "checkbox",
      "id": "enable_scroll_animations",
      "label": "Enable Scroll Animations",
      "default": true,
      "info": "Animate cards as they come into view"
    },
    {
      "type": "select",
      "id": "animation_style",
      "label": "Animation Style",
      "options": [
        {
          "value": "subtle",
          "label": "Subtle - Gentle movements"
        },
        {
          "value": "dynamic",
          "label": "Dynamic - More pronounced effects"
        },
        {
          "value": "minimal",
          "label": "Minimal - Very subtle"
        }
      ],
      "default": "subtle"
    },
    {
      "type": "header",
      "content": "Layout & Display"
    },
    {
      "type": "range",
      "id": "products_per_row",
      "min": 1,
      "max": 6,
      "step": 1,
      "label": "Products Per Row",
      "default": 4,
      "info": "Number of products to show per row on desktop"
    },
    {
      "type": "checkbox",
      "id": "show_product_description",
      "label": "Show Product Descriptions",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_product_rating",
      "label": "Show Product Ratings",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_sale_badges",
      "label": "Show Sale Badges",
      "default": true
    },
    {
      "type": "header",
      "content": "Responsive Design"
    },
    {
      "type": "checkbox",
      "id": "enable_fluid_typography",
      "label": "Enable Fluid Typography",
      "default": true,
      "info": "Use responsive font scaling"
    },
    {
      "type": "select",
      "id": "mobile_layout",
      "label": "Mobile Layout",
      "options": [
        {
          "value": "stack",
          "label": "Stack - Vertical layout"
        },
        {
          "value": "compact",
          "label": "Compact - Condensed spacing"
        },
        {
          "value": "carousel",
          "label": "Carousel - Horizontal scroll"
        }
      ],
      "default": "stack"
    },
    {
      "type": "range",
      "id": "mobile_padding",
      "min": 0,
      "max": 4,
      "step": 0.5,
      "unit": "rem",
      "label": "Mobile Padding",
      "default": 1,
      "info": "Padding on mobile devices"
    },
    {
      "type": "header",
      "content": "Advanced Options"
    },
    {
      "type": "checkbox",
      "id": "enable_dark_mode",
      "label": "Enable Dark Mode Support",
      "default": true,
      "info": "Automatic dark mode styling"
    },
    {
      "type": "select",
      "id": "container_width",
      "label": "Container Width",
      "options": [
        {
          "value": "narrow",
          "label": "Narrow - 800px max"
        },
        {
          "value": "standard",
          "label": "Standard - 1200px max"
        },
        {
          "value": "wide",
          "label": "Wide - 1400px max"
        },
        {
          "value": "full",
          "label": "Full Width - No max"
        }
      ],
      "default": "standard"
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "min": 0,
      "max": 8,
      "step": 0.5,
      "unit": "rem",
      "label": "Top Padding",
      "default": 4
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "min": 0,
      "max": 8,
      "step": 0.5,
      "unit": "rem",
      "label": "Bottom Padding",
      "default": 4
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "text",
          "id": "sustainability_badge",
          "label": "Sustainability Badge",
          "default": "Sustainable"
        },
        {
          "type": "checkbox",
          "id": "show_description",
          "label": "Show Product Description",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_rating",
          "label": "Show Product Rating",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "V Product Cards",
      "blocks": [
        {
          "type": "product"
        },
        {
          "type": "product"
        },
        {
          "type": "product"
        },
        {
          "type": "product"
        }
      ]
    }
  ]
}
{% endschema %}
